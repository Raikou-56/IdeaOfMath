@{
    ViewData[index: "Title"] = "Scoring Page";
}
@section Scripts {
    <script src="~/js/img-change.js"></script>
}

@model AnswerHistory

<p>@Model.StudentId @Model.SolvedAt.ToString(format: "yyyy/MM/dd")</p>

<form asp-area="" asp-controller="Answer" asp-action="ScoreAnswer" method="post">
    <input type="hidden" name="historyId" value="@Model.Id" />
    @if (Model.CloudinaryUrls == null || Model.CloudinaryUrls.Count == 0)
    {
        <p>解答画像がありません。</p>
    }
    else
    {
        @foreach (string url in Model.CloudinaryUrls)
        {
            <div class="image-wrapper">
                <img src="@url" alt="解答画像" class="answer-image" id="img-@url.GetHashCode()" />
                <div class="zoom-controls">
                    <button type="button" onclick="zoomImage('img-@url.GetHashCode()', 1.25)">拡大</button>
                    <button type="button" onclick="zoomImage('img-@url.GetHashCode()', 0.8)">縮小</button>
                </div>
            </div>
        }
    }<br>

    <div class="score-input-group">
        <label for="scoreInput"><i class="fas fa-chart-line"></i> 得点（0〜50）:</label>
        <input type="number" asp-for="Score" id="scoreInput" min="0" max="50" class="modern-score-input" />
        <span class="unit">点</span>
    </div>
<br>
    <button class="send" type="submit">採点結果を送信</button>
</form>

<div id="imageModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modalImage">
</div>